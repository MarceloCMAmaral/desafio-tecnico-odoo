<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- ================================================================== -->
    <!-- Grupos de segurança                                                 -->
    <!-- Padrão Odoo: grupo usuário é auto-atribuído a todos os internal    -->
    <!-- users, e o admin recebe o grupo gerente automaticamente.            -->
    <!-- ================================================================== -->
    <record id="group_combustivel_user" model="res.groups">
        <field name="name">Usuário de Combustível</field>
        <field name="comment">
            Pode registrar abastecimentos e visualizar tanques e entradas.
            Não pode excluir abastecimentos nem gerenciar entradas/tanques.
        </field>
    </record>

    <record id="group_combustivel_manager" model="res.groups">
        <field name="name">Gerente de Combustível</field>
        <field name="implied_ids" eval="[(4, ref('group_combustivel_user'))]"/>
        <field name="comment">
            Acesso completo: CRUD em todos os modelos do módulo.
            Pode gerenciar tanques, registrar entradas e excluir abastecimentos.
        </field>
    </record>

    <!-- Auto-atribuir: todos os usuários internos recebem o grupo usuário -->
    <record id="base.group_user" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('group_combustivel_user'))]"/>
    </record>

    <!-- Admin recebe automaticamente o grupo gerente -->
    <record id="base.group_system" model="res.groups">
        <field name="implied_ids" eval="[(4, ref('group_combustivel_manager'))]"/>
    </record>

    <!-- ================================================================== -->
    <!-- Sequência para abastecimentos                                       -->
    <!-- ================================================================== -->
    <record id="seq_abastecimento" model="ir.sequence">
        <field name="name">Abastecimento</field>
        <field name="code">controle.combustivel.abastecimento</field>
        <field name="prefix">ABAST/%(year)s/</field>
        <field name="padding">5</field>
        <field name="number_next">1</field>
        <field name="number_increment">1</field>
    </record>
</odoo>

